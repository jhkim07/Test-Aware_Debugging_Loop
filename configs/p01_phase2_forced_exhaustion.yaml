# P0-1 Phase 2: Forced Test Exhaustion
# Purpose: Force test exhaustion by disabling LLM (use random/empty tests)
# Strategy: max_test_iterations=1 + llm.enabled=false → guaranteed test failure → test exhaustion

runner:
  mode: swebench_harness
  dataset_name: princeton-nlp/SWE-bench_Lite

instances:
  list:
    - astropy__astropy-12907  # Known case, but LLM disabled so will fail

limits:
  max_iters: 5  # Total iterations
  max_test_iterations: 1  # CRITICAL: Force test exhaustion after 1 attempt
  max_code_iterations: 4  # Allow code iterations if fallthrough activates
  time_limit_minutes: 10

llm:
  enabled: false  # CRITICAL: Disable LLM to force test failure

policy:
  forbid_skip: true
  forbid_xfail: true
  forbid_network: true
  restrict_file_io: true

split:
  public_ratio: 0.7
  seed: 0

# Expected behavior:
#   1. Test iteration 1: Random/empty test → BRS failure (no LLM)
#   2. Test exhaustion triggered (max_test_iterations=1)
#   3. P0-1 diagnostic triggered with test candidate
#   4. Execution STOPS (no fallthrough yet in Phase 1)
#
# Success criteria:
#   - Test exhaustion reached
#   - P0-1 diagnostic box displayed
#   - test_candidates > 0 recorded
#   - valid_for_diagnosis count shown
#   - Clean stop with diagnostic summary
