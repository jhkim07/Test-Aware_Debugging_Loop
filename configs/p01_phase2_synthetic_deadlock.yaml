# P0-1 Phase 2: Synthetic Pre-code Deadlock Test
# Purpose: Force test exhaustion to validate fallthrough logic
# Strategy: max_test_iterations=1 to artificially create test deadlock

runner:
  mode: swebench_harness
  dataset_name: princeton-nlp/SWE-bench_Lite

instances:
  list:
    - astropy__astropy-12907  # Known BRS=1 case, will likely fail on first test attempt

limits:
  max_iters: 5  # Total iterations (1 test + 4 code if fallthrough works)
  max_test_iterations: 1  # CRITICAL: Force test exhaustion after 1 attempt
  max_code_iterations: 4  # Allow code iterations if fallthrough activates
  time_limit_minutes: 20

llm:
  enabled: true
  model: gpt-4o-mini

policy:
  forbid_skip: true
  forbid_xfail: true
  forbid_network: true
  restrict_file_io: true

split:
  public_ratio: 0.7
  seed: 0

# NOTE: This is Phase 1 RECORD-ONLY test
# Fallthrough activation is NOT yet implemented
# Expected behavior:
#   1. Test iteration 1: Likely BRS failure (first attempt)
#   2. Test exhaustion triggered (max_test_iterations=1)
#   3. P0-1 diagnostic shows test candidates
#   4. Execution STOPS (no fallthrough yet)
#
# Success criteria:
#   - valid_for_diagnosis > 0 (test candidate recorded)
#   - Diagnostic shows failure stage
#   - Clean stop at test exhaustion
